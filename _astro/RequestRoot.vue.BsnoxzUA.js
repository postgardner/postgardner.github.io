import{d as pe,U as Me,b as G,o as C,q as h,t as X,u as t,B as Y,aQ as Qe,aR as it,aS as Je,aT as Ve,aU as Te,aV as Xe,aW as Ae,aX as gt,aY as te,aZ as bt,F as he,J as ye,a_ as xt,K as fe,a$ as wt,b0 as kt,b1 as ze,b2 as et,aG as Be,V as _e,ax as we,c as Z,a2 as Ue,f as R,w as q,$ as se,e as U,k as V,x as re,z as Re,Q as me,Z as F,E as ne,b3 as ut,D as B,b4 as ct,S as je,M as K,b5 as Et,b6 as Se,b7 as Ie,ay as ee,av as Fe,L as Ee,aI as Ge,b8 as Ct,a3 as qe,b9 as ke,I as Rt,T as Ce,ba as dt,s as Oe,r as $e,bb as _t,aP as qt,aL as tt,bc as at,bd as Le,be as Dt,l as St,bf as It,X as lt,Y as st,p as Mt,bg as Tt,bh as pt,bi as Ut,bj as Ot,bk as At,aB as oe,bl as zt,bm as Pe,bn as Nt,bo as Wt,az as Ne,bp as nt,aN as Vt}from"./_OpenAPI.CJmNRckt.js";import{d as vt}from"./LibraryIcon.vue.B2-VRuO7.js";import{e as mt,i as jt,C as $t,D as Lt}from"./mediaTypes.DUc6Ko8D.js";import{i as ot}from"./ScalarAsciiArt.vue.CKRPfiKU.js";import{g as Pt,m as Ht}from"./SidebarButton.vue.DVEFglS6.js";import{a as Bt,w as He}from"./DeleteSidebarListElement.vue.Cw9ULXXU.js";import{m as Ft,C as ft}from"./EditSidebarListElement.vue.DNvOjsvB.js";import{$ as Gt}from"./IconSelector.vue.agY6sZc2.js";import"./jsx-runtime.DCqPeNwG.js";import"./index.66AI1_x2.js";import"./_commonjsHelpers.Cpj98o6Y.js";import"./preload-helper.BlTxHScW.js";import"./floating-ui.dom.DfmbYluP.js";/* empty css                       */import"./ScalarHotkey.vue.YynLEUCJ.js";import"./ScalarPopover.vue.McuIqgit.js";const Yt={parse(e){try{return{error:!1,data:JSON.parse(e)}}catch(a){return{error:!0,message:a.message?String(a.message):"Unknown Error"}}}},Zt=["aria-pressed"],Kt={class:"sr-only"},Qt={class:"size-4",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Jt={"clip-path":"url(#mask)"},Xt=pe({__name:"SidebarToggle",setup(e){const{isSidebarOpen:a,toggleSidebarOpen:l}=Me();return(o,s)=>(C(),G("button",{"aria-pressed":t(a),class:"scalar-sidebar-toggle text-c-3 hover:bg-b-2 active:text-c-1 rounded-lg p-2",type:"button",onClick:s[0]||(s[0]=(...i)=>t(l)&&t(l)(...i))},[h("span",Kt,X(t(a)?"Hide":"Show")+" sidebar",1),(C(),G("svg",Qt,[s[1]||(s[1]=h("defs",null,[h("clipPath",{id:"mask"},[h("path",{"clip-rule":"evenodd",d:"M9 3.2H4c-1.7 0-3 1.3-3 3v11.5c0 1.7 1.3 3 3 3h5V3.2z"})])],-1)),h("g",Jt,[h("path",{class:Y(["transition-transform duration-300",t(a)?"translate-x-0":"-translate-x-1/2"]),d:"M1 3.2h8v17.5H1z",fill:"currentColor"},null,2)]),s[2]||(s[2]=h("path",{d:"M20 20.8H4c-1.7 0-3-1.3-3-3V6.2c0-1.7 1.3-3 3-3h16c1.7 0 3 1.3 3 3v11.5c0 1.7-1.3 3-3 3zM9 3.2v17.5",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},null,-1))]))],8,Zt))}}),ea=e=>{const a=new Set;return e&&["path","query","headers","cookies"].some(l=>{var o,s;return(s=(o=e.parameters)==null?void 0:o[l])==null?void 0:s.some(i=>{i.required&&i.value===""&&a.add(i.key)})}),a},ta={Date:!0,RegExp:!0,String:!0,Number:!0};function Ye(e,a,l={cyclesFix:!0},o=[]){let s=[];const i=Array.isArray(e);for(const r in e){const n=e[r],u=i?+r:r;if(!(r in a)){s.push({type:"REMOVE",path:[u],oldValue:e[r]});continue}const c=a[r],v=typeof n=="object"&&typeof c=="object"&&Array.isArray(n)===Array.isArray(c);n&&c&&v&&!ta[Object.getPrototypeOf(n)?.constructor?.name]&&(!l.cyclesFix||!o.includes(n))?s.push.apply(s,Ye(n,c,l,l.cyclesFix?o.concat([n]):[]).map(f=>(f.path.unshift(u),f))):n!==c&&!(Number.isNaN(n)&&Number.isNaN(c))&&!(v&&(isNaN(n)?n+""==c+"":+n==+c))&&s.push({path:[u],type:"CHANGE",value:c,oldValue:n})}const d=Array.isArray(a);for(const r in a)r in e||s.push({type:"CREATE",path:[d?+r:r],value:a[r]});return s}const ht=(e,a=[])=>{const l=[];let o=!1;for(let s=0;s<e.length;s++){if(o){o=!1;continue}const i=e[s],d=e[s+1];if(i){if(a.length)i.path=[...a,...i.path],d&&(d.path=[...a,...d.path]);else if(i.path[0]!=="paths"){l.push(i);continue}if(i.type==="REMOVE"&&d?.type==="CREATE"){const[,r,n]=i.path,[,u,c]=d.path,v=["paths",u].filter(f=>typeof f=="string");if(r!==u&&l.push({type:"CHANGE",path:["paths","path"],oldValue:r,value:u}),n&&typeof c=="string"&&n!==c&&u&&(l.push({type:"CHANGE",path:["paths",u,"method"],oldValue:n,value:c}),v.push(c)),a.length===0){const f=Ye(i.oldValue,d.value);if(f.length){const D=ht(f,v);l.push(...D)}}o=!0}else i.type==="CREATE"&&i.path.length>3&&typeof i.path.at(-1)!="number"?l.push({...i,type:"CHANGE",oldValue:void 0}):i.type==="REMOVE"&&i.path.length>3&&typeof i.path.at(-1)!="number"?l.push({...i,type:"CHANGE",value:void 0}):l.push(i)}}return l},De=(e,a,l)=>{for(const o of e){const s=a[o];if(s&&l(s))return s}return null},be=e=>e instanceof te.ZodOptional?be(e.unwrap()):e instanceof te.ZodDefault?be(e._def.innerType):e instanceof te.ZodEffects?be(e._def.schema):e instanceof te.ZodCatch?be(e._def.innerType):e,aa=(e,a)=>{let l=e;for(const o of a){if(l=be(l),l instanceof te.ZodAny)return l;if(l instanceof te.ZodObject&&typeof o=="string"&&o in l.shape)l=l.shape[o];else if(l instanceof te.ZodArray)if(typeof o=="number")l=l.element;else if(typeof o=="string")if(l=l.element,l instanceof te.ZodObject&&o in l.shape)l=l.shape[o];else return null;else return null;else if(l instanceof te.ZodRecord)l=l.valueSchema;else return null;l=be(l)}return l},xe=(e,a)=>{const l=aa(e,a.path);if(!l)return null;const o=a.path.join("."),s=a.path.slice(0,-1).join(".");if(a.type==="REMOVE")return{path:o,pathMinusOne:s,value:void 0};const i=Te(a.value,l,!1);return i?{path:o,pathMinusOne:s,value:i}:null},la=(e,{activeCollection:a},{collectionMutators:l})=>{if(!a.value)return!1;if(typeof e.path[e.path.length-1]=="number"&&(e.type==="CREATE"||e.type==="REMOVE")){const o=xe(Qe,{...e,path:e.path});if(!o)return!1;const s=[...it(a.value,o.pathMinusOne)];e.type==="CREATE"?s.push(o.value):e.type==="REMOVE"&&s.pop(),l.edit(a.value.uid,o.pathMinusOne,s)}else{const o=xe(Qe,e);if(!o)return!1;l.edit(a.value.uid,o.path,o.value)}return!0},rt=(e,a)=>{const{requests:l,requestExamples:o,requestExampleMutators:s}=a,i=l[e];i?.examples.forEach(d=>{var r;const n=bt(i,((r=o[d])==null?void 0:r.name)??"Default");n&&s.set({...n,uid:d})})},sa=(e,{activeCollection:a},l)=>{if(!a.value)return!1;const{requests:o,requestMutators:s}=l,[,i,d,...r]=e.path;if(i==="path"&&e.type==="CHANGE")a.value.requests.forEach(n=>{var u;((u=o[n])==null?void 0:u.path)===e.oldValue&&s.edit(n,"path",e.value)});else if(d==="method"&&e.type==="CHANGE")a.value.requests.forEach(n=>{var u,c;((u=o[n])==null?void 0:u.method)===e.oldValue&&((c=o[n])==null?void 0:c.path)===i&&s.edit(n,"method",e.value)});else if(e.type!=="CHANGE"&&typeof r.at(-1)=="number"){const n=De(a.value.requests,o,v=>v.path===i&&v.method===d),u=xe(Ae,{...e,path:e.path.slice(3)});if(!n||!u)return!1;const c=[...it(n,u.pathMinusOne)];e.type==="CREATE"?c.push(u.value):e.type==="REMOVE"&&c.pop(),s.edit(n.uid,u.pathMinusOne,c),(e.path[3]==="parameters"||e.path[3]==="requestBody")&&rt(n.uid,l)}else if(e.type==="CREATE"){const[n]=Object.entries(e.value??{}),[u,c]=n??[],v=d?e.value:c,f=d||u,D=Ve.array().parse(v.servers??[]),{security:x,...S}=v,T={...S,method:gt(f)?f:"get",path:i,parameters:v.parameters??[],servers:D.map(E=>E.uid)};x!=null&&x.length&&(T.security=x.map(E=>{if(Object.keys(E).length){const[w]=Object.keys(E);return w?{[w]:E[w]}:E}return E}));const M=Te(T,Ae,!1);if(!M)return!1;s.add(M,a.value.uid)}else if(e.type==="REMOVE"){const n=De(a.value.requests,o,u=>u.path===i&&u.method===d);if(!n)return!1;s.delete(n,a.value.uid)}else if(e.type==="CHANGE"){const n=De(a.value.requests,o,c=>c.path===i&&c.method===d),u=xe(Ae,{...e,path:r});if(!n||!u)return!1;s.edit(n.uid,u.path,u.value),(e.path[3]==="parameters"||e.path[3]==="requestBody")&&rt(n.uid,l)}return!0},na=(e,{activeCollection:a},{servers:l,serverMutators:o})=>{if(!a.value)return!1;const[,s,...i]=e.path;if(i!=null&&i.length){const d=a.value.servers[s];if(!d)return!1;const r=l[d],n=xe(Ve,{...e,path:i});if(!r||!n)return!1;const u=e.type==="REMOVE"&&i[i.length-1]==="variables"?{}:n.value;o.edit(d,n.path,u)}else if(e.type==="REMOVE"){if(!a.value.servers[s])return!1;o.delete(a.value.servers[s],a.value.uid)}else if(e.type==="CREATE"){const d=Te(e.value,Ve,!1);if(!d)return!1;o.add(d,a.value.uid)}return!0},oa=(e,{activeCollection:a},{tags:l,tagMutators:o})=>{if(!a.value)return!1;const[,s,...i]=e.path;if(i!=null&&i.length){const d=a.value.tags[s];if(!d)return!1;const r=l[d],n=xe(Xe,{...e,path:i});if(!r||!n)return!1;o.edit(d,n.path,n.value)}else if(e.type==="REMOVE"){const d=a.value.tags[s];if(!d)return!1;const r=l[d];if(!r)return!1;o.delete(r,a.value.uid)}else if(e.type==="CREATE"){const d=Te(e.value,Xe,!1);if(!d)return!1;o.add(d,a.value.uid)}return!0},ra=(e,a,l)=>{const o=be(e);if(o instanceof te.ZodUnion||o instanceof te.ZodDiscriminatedUnion){for(const s of o.options)if(s instanceof te.ZodObject&&a in s.shape&&s.shape[a]instanceof te.ZodLiteral&&s.shape[a].value===l)return s}return null},ia=(e,{activeCollection:a},{securitySchemes:l,securitySchemeMutators:o})=>{if(!a.value)return!1;const[,,s,...i]=e.path,d=l[s]??De(a.value.securitySchemes,l,r=>r.nameKey===s);if(i!=null&&i.length){const r=ra(Je,"type",d?.type??"");if(!r||!d)return!1;const n=xe(r,{...e,path:i});if(!n)return!1;const u=n.path;o.edit(d.uid,u,n.value)}else if(e.type==="REMOVE"){if(!d)return!1;o.delete(d.uid)}else e.type==="CREATE"&&o.add(Je.parse(e.value),a.value.uid);return!0},ua=5*1e3,ca=60*1e3,da=()=>{const{toast:e}=Be(),a=he(),l=ye(),{activeCollection:o,activeWorkspace:s}=a,{collectionMutators:i}=l,d=c=>e(`[useOpenApiWatcher] Changes to the ${c} were not applied`,"error"),r=c=>{c.path[0]==="info"||c.path[0]==="security"?la(c,a,l)||d("collection"):c.path[0]==="components"&&c.path[1]==="securitySchemes"?ia(c,a,l)||d("securitySchemes"):c.path[0]==="servers"?na(c,a,l)||d("servers"):c.path[0]==="tags"?oa(c,a,l)||d("tags"):c.path[0]==="paths"&&(sa(c,a,l)||d("requests"))},{pause:n,resume:u}=xt(async()=>{var c,v;const f=(c=o.value)==null?void 0:c.documentUrl;if(!f)return;const D=ze[f];try{const x=await wt(f,(v=s.value)==null?void 0:v.proxyUrl,!1),S=kt(x);if(i.edit(o.value.uid,"watchModeStatus","WATCHING"),D!=null&&D.hash)if(D.hash&&D.hash!==S){const{schema:T}=await et(x),M=Ye(D.schema,T),E=ht(M);try{E.forEach(r),ze[f]={hash:S,schema:T}}catch(w){console.error("[useOpenApiWatcher] Error:",w)}}else console.log("[useOpenApiWatcher] No changes detected yet…");else{const{schema:T}=await et(x);T&&(ze[f]={hash:S,schema:T})}}catch(x){console.error("[useOpenApiWatcher] Error:",x),console.info("[useOpenApiWatcher] Pausing watcher for 60 seconds"),n(),i.edit(o.value.uid,"watchModeStatus","ERROR"),e("[useOpenApiWatcher] Unable to fetch the spec file, paused the watcher for 60 seconds","error"),setTimeout(()=>{console.info("[useOpenApiWatcher] Resuming watcher"),u()},ca)}},ua);fe([()=>{var c;return(c=o.value)==null?void 0:c.documentUrl},()=>{var c;return(c=o.value)==null?void 0:c.watchMode}],([c,v])=>{c&&v?(console.info(`[useOpenApiWatcher] Watching ${c} …`),u()):o.value&&(n(),i.edit(o.value.uid,"watchModeStatus","IDLE"))},{immediate:!0})},pa=`         ,\\
         \\\\\\,_
          \\\` ,\\
     __,.-" =__)
   ."        )
,_/   ,    \\/\\_
\\_| )_-\\ \\_-\`
   \`-----\` \`--\``,va=`         __
        // \\,_
          \\\` ,\\
     __,.-" =__)
   ."        )
,_/   ,    \\/\\ 
\\_| // /  /  /
   /  /    `,ma={class:"m-0 flex items-center gap-1.5 whitespace-nowrap font-medium"},fa={class:"flex h-4 w-4 items-center justify-center"},ha=pe({__name:"EnvironmentSelector",setup(e){const{activeCollection:a,activeWorkspace:l,activeEnvironment:o}=he(),{collectionMutators:s}=ye(),{layout:i}=_e(),d=we(),r=f=>{a.value&&l.value&&(s.edit(a.value.uid,"x-scalar-active-environment",f),l.value.activeEnvironmentId=f)},n=()=>{var f;return d.push({name:"environment",params:{environment:(f=l.value)==null?void 0:f.uid}})},u=Z(()=>{const{value:f}=o,{value:D}=a;return f?.uid||D?.["x-scalar-active-environment"]||"No Environment"}),c=Z(()=>{const{value:f}=a,D=f?.["x-scalar-environments"];return D?Object.entries(D).map(([x,S])=>({...S,uid:x,name:x})):[]}),v=f=>{const D=f["x-scalar-active-environment"];D&&a.value&&l.value?(a.value["x-scalar-active-environment"]=D,l.value.activeEnvironmentId=D):l.value&&(l.value.activeEnvironmentId="")};return fe(a,f=>f&&v(f)),Ue(()=>{a.value&&v(a.value)}),(f,D)=>(C(),G("div",null,[R(t(je),{placement:"bottom-end"},{items:q(()=>[(C(!0),G(re,null,Re(c.value,x=>(C(),U(t(me),{key:x.uid,class:"group/item flex items-center gap-1.5 overflow-hidden text-ellipsis whitespace-nowrap",onClick:F(S=>r(x.uid),["stop"])},{default:q(()=>{var S;return[R(t(ut),{selected:((S=t(a))==null?void 0:S["x-scalar-active-environment"])===x.uid},null,8,["selected"]),ne(" "+X(x.name),1)]}),_:2},1032,["onClick"]))),128)),R(t(me),{class:"group/item flex items-center gap-1.5 overflow-hidden text-ellipsis whitespace-nowrap",onClick:D[0]||(D[0]=F(x=>r(""),["stop"]))},{default:q(()=>{var x,S;return[h("div",{class:Y(["flex h-4 w-4 items-center justify-center rounded-full p-[3px]",((x=t(o))==null?void 0:x.uid)===""&&((S=t(a))==null?void 0:S["x-scalar-active-environment"])===""?"bg-c-accent text-b-1":"shadow-border text-transparent"])},[R(t(B),{class:"size-2.5",icon:"Checkmark",thickness:"3"})],2),D[1]||(D[1]=ne(" No Environment "))]}),_:1}),R(t(ct)),t(i)!=="modal"?(C(),U(t(me),{key:0,class:"flex items-center gap-1.5",onClick:n},{default:q(()=>[h("div",fa,[R(t(B),{icon:"Brackets",size:"sm"})]),D[2]||(D[2]=h("span",{class:"leading-none"},"Manage Environments",-1))]),_:1})):V("",!0)]),default:q(()=>[R(t(se),{class:"text-c-1 hover:bg-b-2 h-auto w-fit justify-start px-1.5 py-1.5 pl-2 font-normal",fullWidth:"",variant:"ghost"},{default:q(()=>[h("h2",ma,X(u.value),1)]),_:1})]),_:1})]))}});function ya(){const e=we(),{activeWorkspace:a,activeWorkspaceRequests:l,activeWorkspaceCollections:o}=he(),{requests:s,tags:i}=ye(),d=K([]),r=K([]),n=K(0),u=K(""),c=K(null),v=K([]),f=new Et(d.value,{keys:["title","description","body"]}),D=()=>{u.value="",n.value=0,r.value=[],c.value instanceof HTMLInputElement&&c.value.blur()},x=p=>{d.value=p.filter(y=>!Ie(y)).filter(y=>{var O;const z=(O=o.value)==null?void 0:O.find(A=>A.requests.includes(y.uid));return!(z!=null&&z.tags.map(A=>i[A]).filter(Se).filter(A=>{var N;return(N=y.tags)==null?void 0:N.includes(A.name)}).filter(A=>Ie(A)).length)}).map(y=>{var O,z;return{id:y.uid,title:y.summary??y.method,description:y.description??"",httpVerb:y.method,path:y.path,link:(z=e?.resolve({name:"request",params:{[ee.Request]:y.uid,[ee.Workspace]:(O=a.value)==null?void 0:O.uid}}))==null?void 0:z.href}}),f.setCollection(d.value)},S=()=>{n.value=0,r.value=f.search(u.value)};fe(u,p=>{p.length?S():r.value=[]});const T=p=>{const y=p==="up"?-1:1,O=m.value.length;n.value=(n.value+y+O)%O,Fe(()=>{const z=v.value[n.value];z instanceof HTMLElement&&z.scrollIntoView({behavior:"smooth",block:"center"})})},M=()=>{if(n.value>=0){const p=m.value[n.value];p&&w(p)}},E=Z(()=>l.value.map(p=>s[p]).filter(Se));fe(l,()=>{x(E.value)},{immediate:!0});const w=p=>{e.push(p.item.id),D()},m=Z(()=>u.value.length===0?d.value.map(p=>({item:p})):r.value);return{searchText:u,searchResultsWithPlaceholderResults:m,selectedSearchResult:n,onSearchResultClick:w,fuseSearch:S,searchInputRef:c,searchResultRefs:v,navigateSearchResults:T,selectSearchResult:M,populateFuseDataArray:x}}function ga(e,{collections:a,collectionMutators:l,tags:o,tagMutators:s,workspaceMutators:i}){const{layout:d}=_e(),r=(n,u)=>{n.type==="collection"?l.edit(n.uid,"children",u):n.type==="tag"&&s.edit(n.uid,"children",u)};return{handleDragEnd:(n,u)=>{var c,v,f,D;if(!n||!u)return;const{id:x,parentId:S}=n,{id:T,parentId:M,offset:E}=u;if(S?a[S]?l.edit(S,"children",a[S].children.filter(w=>w!==x)):o[S]&&s.edit(S,"children",o[S].children.filter(w=>w!==x)):i.edit((c=e.value)==null?void 0:c.uid,"collections",((v=e.value)==null?void 0:v.collections.filter(w=>w!==x))??[]),E===2){const w=a[T]||o[T];w&&r(w,[...w.children??[],x])}else if(M){const w=a[M]||o[M];if(!w)return;const m=[...w.children??[]],p=m.findIndex(y=>T===y)??0;m.splice(p+E,0,x),r(w,m)}else{const w=[...((f=e.value)==null?void 0:f.collections)??[]],m=w.findIndex(p=>T===p)??0;w.splice(m+E,0,x),i.edit((D=e.value)==null?void 0:D.uid,"collections",w)}},isDroppable:(n,u)=>{var c,v;return!(d==="modal"||!a[n.id]&&u.offset!==2||a[n.id]&&((v=(c=a[u.id])==null?void 0:c.info)==null?void 0:v.title)==="Drafts")}}}const ba={class:"grid grid-cols-[auto,1fr] gap-2"},xa={class:"flex aspect-square"},wa=pe({__name:"EditSidebarListCollection",props:{name:{},icon:{}},emits:["close","edit"],setup(e,{emit:a}){const l=e,o=a,s=K(l.name),i=K(l.icon);return(d,r)=>(C(),U(Bt,{onCancel:r[2]||(r[2]=n=>o("close")),onSubmit:r[3]||(r[3]=n=>o("edit",s.value,i.value))},{default:q(()=>[h("div",ba,[h("div",xa,[R(Gt,{modelValue:i.value,"onUpdate:modelValue":r[0]||(r[0]=n=>i.value=n),placement:"bottom-start"},{default:q(()=>[R(t(se),{class:"aspect-square h-auto px-0",variant:"outlined"},{default:q(()=>[R(t(vt),{class:"text-c-2 size-4",src:i.value},null,8,["src"])]),_:1})]),_:1},8,["modelValue"])]),R(t(Ft),{modelValue:s.value,"onUpdate:modelValue":r[1]||(r[1]=n=>s.value=n),autofocus:"",class:"flex-1"},null,8,["modelValue"])])]),_:1}))}}),ka=pe({__name:"RequestSidebarItemMenu",props:{menuItem:{}},emits:["closeMenu","toggleWatchMode","clearDrafts"],setup(e,{emit:a}){const l=e,o=a,{replace:s}=we(),{activeRouterParams:i,activeWorkspaceCollections:d,activeWorkspaceRequests:r}=he(),{events:n,requestMutators:u}=ye(),c=Ee(),v=Ee(),f=Ee(),D=()=>{var p;return n.commandPalette.emit({commandName:"Add Example",metaData:{itemUid:(p=l.menuItem.item)==null?void 0:p.entity.uid}})},x=(p,y)=>{var O;(O=l.menuItem.item)==null||O.edit(p,y),c.hide()},S=()=>{var p,y,O;if((p=l.menuItem.item)==null||p.delete(),!r.value.length){const{request:z}=dt(),A=d.value.find(N=>{var W;return((W=N.info)==null?void 0:W.title)==="Drafts"});A&&(u.add(z,A.uid),s({name:"request",params:{[ee.Request]:z.uid}}))}if(i.value[ee.Request]===((y=l.menuItem.item)==null?void 0:y.entity.uid)&&s({name:"request",params:{[ee.Request]:"default"}}),i.value[ee.Examples]===((O=l.menuItem.item)==null?void 0:O.entity.uid)&&s({name:"request",params:{[ee.Request]:"default"}}),d.value[0]){const z=d.value[0].requests[0];s({name:"request",params:{[ee.Request]:z}})}v.hide()},T=K(null);fe([()=>l.menuItem.open,T],async([p])=>{var y,O;p&&(O=(y=T.value)==null?void 0:y.$parent)!=null&&O.$el&&T.value.$parent.$el.focus()});const M=()=>l.menuItem.open&&o("closeMenu");Ue(()=>window.addEventListener("click",M)),Ge(()=>window.removeEventListener("click",M));const E=()=>{o("toggleWatchMode",l.menuItem.item)},w=()=>{o("clearDrafts"),f.hide()},m=Z(()=>{var p;return((p=l.menuItem.item)==null?void 0:p.title)==="Drafts"});return(p,y)=>{var O,z;return C(),G(re,null,[p.menuItem.targetRef&&p.menuItem.open?(C(),U(t(Rt),{key:0,placement:"right-start",target:p.menuItem.targetRef,teleport:""},{floating:q(()=>[R(t(Ct),{onKeydown:y[3]||(y[3]=qe(A=>p.$emit("closeMenu"),["escape"]))},{default:q(()=>{var A,N;return[((A=p.menuItem.item)==null?void 0:A.entity.type)==="request"?(C(),U(t(ke),{key:0,class:"flex gap-2",onClick:D},{default:q(()=>[R(t(B),{class:"inline-flex",icon:"Example",size:"md",thickness:"1.5"}),y[8]||(y[8]=h("span",null,"Add Example",-1))]),_:1})):V("",!0),m.value?V("",!0):(C(),U(t(ke),{key:1,ref_key:"menuRef",ref:T,class:"flex gap-2",onClick:y[0]||(y[0]=W=>t(c).show())},{default:q(()=>{var W;return[R(t(B),{class:"inline-flex",icon:"Edit",size:"md",thickness:"1.5"}),h("span",null,[((W=p.menuItem.item)==null?void 0:W.entity.type)==="collection"?(C(),G(re,{key:0},[ne(" Edit ")],64)):(C(),G(re,{key:1},[ne(" Rename ")],64))])]}),_:1},512)),(N=p.menuItem.item)!=null&&N.documentUrl?(C(),U(t(ke),{key:2,ref_key:"menuRef",ref:T,class:"flex gap-2",onClick:E},{default:q(()=>{var W,L;return[R(t(B),{class:"inline-flex",icon:(W=p.menuItem.item)!=null&&W.watchMode?"Unwatch":"Watch",size:"md",thickness:"1.5"},null,8,["icon"]),h("span",null,X((L=p.menuItem.item)!=null&&L.watchMode?"Disable Watch Mode":"Enable Watch Mode"),1)]}),_:1},512)):V("",!0),m.value?V("",!0):(C(),U(t(ke),{key:3,class:"flex gap-2",onClick:y[1]||(y[1]=W=>t(v).show())},{default:q(()=>[R(t(B),{class:"inline-flex",icon:"Delete",size:"md",thickness:"1.5"}),y[9]||(y[9]=h("span",null,"Delete",-1))]),_:1})),m.value?(C(),U(t(ke),{key:4,class:"flex gap-2",onClick:y[2]||(y[2]=W=>t(f).show())},{default:q(()=>[R(t(B),{class:"inline-flex",icon:"Delete",size:"md",thickness:"1.5"}),y[10]||(y[10]=h("span",null,"Clear Drafts",-1))]),_:1})):V("",!0)]}),_:1})]),_:1},8,["target"])):V("",!0),R(t(Ce),{size:"xxs",state:t(v),title:`Delete ${(O=p.menuItem.item)==null?void 0:O.resourceTitle}`},{default:q(()=>{var A,N;return[R(He,{variableName:((A=p.menuItem.item)==null?void 0:A.title)??"",warningMessage:(N=p.menuItem.item)==null?void 0:N.warning,onClose:y[4]||(y[4]=W=>t(v).hide()),onDelete:S},null,8,["variableName","warningMessage"])]}),_:1},8,["state","title"]),R(t(Ce),{size:"xxs",state:t(c),title:`Edit ${(z=p.menuItem.item)==null?void 0:z.resourceTitle}`},{default:q(()=>{var A,N,W,L;return[((A=p.menuItem.item)==null?void 0:A.resourceTitle)==="Collection"?(C(),U(wa,{key:0,icon:((N=p.menuItem.item)==null?void 0:N.icon)||"interface-content-folder",name:(W=p.menuItem.item)==null?void 0:W.title,onClose:y[5]||(y[5]=j=>t(c).hide()),onEdit:x},null,8,["icon","name"])):(C(),U(ft,{key:1,name:((L=p.menuItem.item)==null?void 0:L.title)??"",onClose:y[6]||(y[6]=j=>t(c).hide()),onEdit:x},null,8,["name"]))]}),_:1},8,["state","title"]),R(t(Ce),{size:"xxs",state:t(f),title:"Clear Drafts"},{default:q(()=>[R(He,{variableName:"All Drafts",warningMessage:"This action will clear all drafts. This cannot be undone.",onClose:y[7]||(y[7]=A=>t(f).hide()),onDelete:w})]),_:1},8,["state"])],64)}}}),Ea=Oe(ka,[["__scopeId","data-v-7d3c4813"]]),Ca=(e,a,l)=>{var o;const s=e.find(n=>{var u;return((u=n.info)==null?void 0:u.title)==="Drafts"}),i=a.length===1;if(!a[0])return!1;const d=s?.requests.includes(a[0]);if(!d)return!1;const r=((o=l[s?.requests[0]??""])==null?void 0:o.summary)!=="My First Request";return i&&d&&!r},de=K(null),ve=K(null),Ra=(e,a)=>{let l=!1;return(...o)=>{l||(e(...o),l=!0,setTimeout(()=>l=!1,a))}},_a=["draggable"],qa=pe({__name:"Draggable",props:{ceiling:{default:.8},floor:{default:.2},isDraggable:{type:Boolean,default:!0},isDroppable:{type:[Boolean,Function],default:!0},parentIds:{},id:{}},emits:["onDragEnd","onDragStart"],setup(e,{expose:a,emit:l}){const o=l,s=Z(()=>e.parentIds.at(-1)??null),i=v=>{!v.dataTransfer||!(v.target instanceof HTMLElement)||!e.isDraggable||(v.target.classList.add("dragging"),v.dataTransfer.dropEffect="move",v.dataTransfer.effectAllowed="move",de.value={id:e.id,parentId:s.value},o("onDragStart",{id:e.id,parentId:s.value}))},d=v=>typeof e.isDroppable=="function"?e.isDroppable(de.value,{id:e.id,parentId:s.value,offset:v}):e.isDroppable,r=Ra(v=>{var f,D;if(!de.value||de.value.id===e.id||e.parentIds.includes(((f=de.value)==null?void 0:f.id)??""))return;const x=(D=ve.value)==null?void 0:D.offset,S=v.target.offsetHeight,T=e.floor*S,M=e.ceiling*S;let E=3;v.offsetY<=0&&x&&x!==3?E=x:v.offsetY<=T?E=0:v.offsetY>=M?E=1:v.offsetY>T&&v.offsetY<M&&(E=2),d(E)&&(ve.value={id:e.id,parentId:s.value,offset:E})},25),n=["above","below","asChild"],u=Z(()=>{var v;let f="sidebar-indent-nested";return e.id===((v=ve.value)==null?void 0:v.id)&&(f+=` dragover-${n[ve.value.offset]}`),f}),c=()=>{if(!ve.value||!de.value)return;const v={...de.value},f={...ve.value};de.value=null,ve.value=null,document.querySelectorAll("div.dragging").forEach(D=>D.classList.remove("dragging")),v.id!==f.id&&o("onDragEnd",v,f)};return a({draggingItem:de,hoveredItem:ve}),(v,f)=>(C(),G("div",{class:Y(u.value),draggable:v.isDraggable,onDragend:c,onDragover:f[0]||(f[0]=F((...D)=>t(r)&&t(r)(...D),["prevent","stop"])),onDragstart:F(i,["stop"])},[$e(v.$slots,"default",{},void 0,!0)],42,_a))}}),Da=(e,a)=>{const l=e.__vccOpts||e;for(const[o,s]of a)l[o]=s;return l},Sa=Da(qa,[["__scopeId","data-v-3449bf19"]]),Ia={class:"line-clamp-1 w-full break-all pl-2 font-medium"},Ma={class:"flex flex-row items-center gap-1"},Ta={class:"relative"},Ua={class:"flex items-start"},Oa=["aria-expanded"],Aa={class:"flex flex-1 flex-row justify-between font-medium"},za={class:"line-clamp-1 w-full break-all text-left"},Na={class:"relative flex h-fit justify-end"},Wa={class:"w-content bg-b-1 z-100 text-xxs text-c-1 pointer-events-none z-10 grid max-w-10 gap-1.5 rounded p-2 leading-5 shadow-lg"},Va={class:"text-c-2 flex items-center"},ja={class:"text-pretty break-all"},$a=["aria-expanded"],La={class:"flex h-5 max-w-[14px] items-center justify-center"},Pa={class:"flex flex-1 flex-row justify-between"},Ha={class:"line-clamp-1 w-full break-all text-left font-medium"},Ba={class:"relative flex h-fit justify-end"},Fa={class:"w-content bg-b-1 z-100 text-xxs text-c-1 pointer-events-none z-10 grid max-w-10 gap-1.5 rounded p-2 leading-5 shadow-lg"},Ga={class:"text-c-2 flex items-center"},Ya={class:"text-pretty break-all"},Za={key:3},We="hover:bg-sidebar-active-b indent-padding-left",Ka=pe({__name:"RequestSidebarItem",props:{isDraggable:{type:Boolean,default:!1},isDroppable:{type:[Boolean,Function],default:!1},parentUids:{},uid:{},menuItem:{}},emits:["onDragEnd","newTab","openMenu"],setup(e,{emit:a}){_t(g=>({f1b25d28:y.value,"30af9cd2":O.value}));const l=a,{activeCollection:o,activeRequest:s,activeRouterParams:i,activeWorkspace:d}=he(),{collections:r,tags:n,requests:u,requestExamples:c,collectionMutators:v,tagMutators:f,requestMutators:D,requestExampleMutators:x,events:S}=ye(),T=we(),{collapsedSidebarFolders:M,toggleSidebarFolder:E}=Me(),{layout:w}=_e(),m=Z(()=>{var g,b,J,ae,ue,$;const _=r[e.uid],k=n[e.uid],I=u[e.uid],P=c[e.uid];return _?{title:((g=_.info)==null?void 0:g.title)||"Untitled Collection",entity:_,resourceTitle:"Collection",children:_.children,icon:_["x-scalar-icon"],documentUrl:_.documentUrl,watchMode:_.watchMode,to:_.uid&&((b=_?.info)==null?void 0:b.title)!=="Drafts"?{name:"collection",params:{[ee.Workspace]:(J=d.value)==null?void 0:J.uid,[ee.Collection]:_.uid}}:void 0,warning:"This cannot be undone. You’re about to delete the collection and all folders and requests inside it.",edit:(H,ce)=>{v.edit(_.uid,"info.title",H),ce&&v.edit(_.uid,"x-scalar-icon",ce)},delete:()=>{d.value&&v.delete(_,d.value)}}:k?{title:k.name,entity:k,resourceTitle:"Tag",children:k.children,warning:"This cannot be undone. You’re about to delete the tag and all requests inside it",edit:H=>f.edit(k.uid,"name",H),delete:()=>e.parentUids[0]&&f.delete(k,e.parentUids[0])}:I?{title:I.summary??I.path,to:{name:"request",params:{workspace:(ae=d.value)==null?void 0:ae.uid,request:I.uid}},method:I.method,entity:I,resourceTitle:"Request",warning:"This cannot be undone. You’re about to delete the request.",children:I.examples.slice(1),edit:H=>D.edit(I.uid,"summary",H),delete:()=>e.parentUids[0]&&D.delete(I,e.parentUids[0])}:P!=null&&P.requestUid?{title:P.name,to:{name:"request.examples",params:{workspace:(ue=d.value)==null?void 0:ue.uid,request:P.requestUid,examples:P.uid}},method:($=u[P.requestUid])==null?void 0:$.method,entity:P,resourceTitle:"Example",warning:"This cannot be undone. You’re about to delete the example from the request.",children:[],edit:H=>x.edit(P.uid,"name",H),delete:()=>x.delete(P)}:{title:"Unknown",entity:{uid:"",type:"unknown"},resourceTitle:"Unknown",children:[],edit:()=>null,delete:()=>null}}),p=Z(()=>m.value.entity.type==="collection"&&m.value.title==="Drafts"),y=Z(()=>e.parentUids.length?w==="modal"?`${(e.parentUids.length-1)*12}px`:`${e.parentUids.length*12}px`:"12px"),O=Z(()=>e.parentUids.length?w==="modal"?`${(e.parentUids.length-1)*12}px`:`${e.parentUids.length*12}px`:"0px"),z=Z(()=>{var g;return M[e.uid]||((g=s.value)==null?void 0:g.uid)===e.uid&&m.value.entity.examples.length>1}),A=Z(()=>{var g;return typeof T.currentRoute.value.name=="string"&&T.currentRoute.value.name.startsWith("request")&&i.value[ee.Request]==="default"&&((g=s.value)==null?void 0:g.uid)===e.uid}),N=K(null),W=Z(()=>{let g=.5,b=.5;if(!N.value)return{ceiling:g,floor:b};const{draggingItem:J}=N.value;return!r[J?.id]&&m.value.entity.type==="collection"?(g=1,b=0):m.value.entity.type==="tag"&&(g=.8,b=.2),{ceiling:g,floor:b}}),L=(g,b)=>!(w==="modal"||c[b.id]||r[g.id]),j=(g,b)=>{g&&(Dt(["default"]).some(J=>g[J])?l("newTab",b.title||"",b.entity.uid):b.to&&T.push(b.to),Fe(()=>S.focusAddressBar.emit()))};function Q(g){var b,J,ae;const ue=e.parentUids[0]?((b=r[e.parentUids[0]])==null?void 0:b.uid)||"":g,$=e.parentUids[0]&&(J=n[g])!=null&&J.name?{tags:[n[g].name]}:{},_=D.add($,ue);_&&(T.push({name:"request",params:{workspace:(ae=d.value)==null?void 0:ae.uid,request:_.uid}}),S.hotKeys.emit({focusAddressBar:new KeyboardEvent("keydown",{key:"l"})}))}const ie=Z(()=>{const{uid:g,watchModeStatus:b}=o.value||{};return g!==m.value.entity.uid?"text-c-3":b==="WATCHING"?"text-c-1":b==="ERROR"?"text-red":"text-c-3"}),le=Z(()=>m.value.title==="Drafts"&&w!=="modal"&&m.value.children.length>0),ge=Z(()=>{const g=u[e.uid];if(g)return!Ie(g);const b=n[e.uid];return b?!Ie(b):!0});return(g,b)=>{const J=qt("RequestSidebarItem",!0);return ge.value?(C(),G("li",{key:0,class:Y(["relative flex flex-row",[t(w)==="modal"&&g.parentUids.length>1||t(w)!=="modal"&&g.parentUids.length?"before:bg-border indent-border-line-offset before:z-1 mb-[.5px] before:pointer-events-none before:absolute before:left-[calc(.75rem_+_.5px)] before:top-0 before:h-[calc(100%_+_.5px)] before:w-[.5px] last:mb-0 last:before:h-full":""]])},[R(t(Sa),{id:m.value.entity.uid,ref_key:"draggableRef",ref:N,ceiling:W.value.ceiling,class:"gap-1/2 flex flex-1 flex-col text-sm",floor:W.value.floor,isDraggable:g.isDraggable,isDroppable:g.isDroppable,parentIds:g.parentUids,onOnDragEnd:b[13]||(b[13]=(...ae)=>g.$emit("onDragEnd",...ae))},{default:q(()=>{var ae,ue;return[(m.value.entity.type==="request"||m.value.entity.type==="requestExample")&&m.value.to?(C(),U(t(tt),{key:0,class:"group no-underline",to:m.value.to,onClick:b[1]||(b[1]=F($=>j($,m.value),["prevent"]))},{default:q(({isExactActive:$})=>{var _,k;return[h("div",{class:Y(["relative flex min-h-8 w-full cursor-pointer flex-row items-start justify-between gap-0.5 rounded py-1.5 pr-2",[We,$||A.value?"bg-sidebar-active-b text-sidebar-active-c transition-none":"text-sidebar-c-2"]])},[h("span",Ia,X(m.value.title||"Untitled"),1),h("div",Ma,[h("div",Ta,[t(w)!=="modal"?(C(),U(t(se),{key:0,class:Y(["hover:bg-b-3 hidden aspect-square h-fit px-0.5 py-0 opacity-0 group-hover:flex group-hover:opacity-100 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",{flex:((k=(_=g.menuItem)==null?void 0:_.item)==null?void 0:k.entity.uid)===m.value.entity.uid&&g.menuItem.open}]),size:"sm",type:"button",variant:"ghost",onClick:b[0]||(b[0]=F(I=>g.$emit("openMenu",{item:m.value,parentUids:g.parentUids,targetRef:I.currentTarget,open:!g.menuItem.open}),["stop","prevent"]))},{default:q(()=>[R(t(B),{icon:"Ellipses",size:"md"})]),_:1},8,["class"])):V("",!0)]),h("span",Ua,[b[14]||(b[14]=ne("   ")),b[15]||(b[15]=h("span",{class:"sr-only"},"HTTP Method:",-1)),m.value.method?(C(),U(t(mt),{key:0,class:"font-bold",method:m.value.method},null,8,["method"])):V("",!0)])])],2)]}),_:1},8,["to"])):(t(w)!=="modal"||g.parentUids.length)&&m.value.entity.type==="collection"?(C(),G("div",{key:1,"aria-expanded":!!t(M)[m.value.entity.uid],class:Y(["hover:bg-b-2 group relative flex w-full flex-row justify-start gap-1.5 rounded p-1.5 focus-visible:z-10",[We,{"bg-sidebar-active-b text-sidebar-active-c transition-none":typeof t(T).currentRoute.value.name=="string"&&t(T).currentRoute.value.name.startsWith("collection")&&t(T).currentRoute.value.params[t(ee).Collection]===m.value.entity.uid,"text-c-2":m.value.title==="Untitled Collection"}]])},[h("span",{class:"flex h-5 max-w-[14px] cursor-pointer items-center justify-center",onClick:b[2]||(b[2]=$=>t(E)(m.value.entity.uid))},[$e(g.$slots,"leftIcon",{},()=>[R(t(at),{class:"text-c-3 shrink-0",open:!!t(M)[m.value.entity.uid]},null,8,["open"])],!0),b[16]||(b[16]=ne("   "))]),h("div",Aa,[m.value.to?(C(),U(t(tt),{key:0,class:"w-full no-underline",to:m.value.to,onClick:b[3]||(b[3]=F(()=>{},["stop","prevent"]))},{default:q(()=>[h("span",za,X(m.value.title),1)]),_:1},8,["to"])):(C(),G(re,{key:1},[ne(X(m.value.title),1)],64)),h("div",Na,[h("div",{class:Y(["items-center gap-px opacity-0 group-hover:flex group-hover:opacity-100 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",{flex:g.menuItem.open,hidden:!g.menuItem.open||((ae=g.menuItem.item)==null?void 0:ae.entity.uid)!==m.value.entity.uid}])},[t(w)!=="modal"&&!p.value||p.value&&le.value?(C(),U(t(se),{key:0,class:"hover:bg-b-3 hover:text-c-1 aspect-square h-fit px-0.5 py-0 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",size:"sm",variant:"ghost",onClick:b[4]||(b[4]=F($=>g.$emit("openMenu",{item:m.value,parentUids:g.parentUids,targetRef:$.currentTarget.parentNode,open:!0}),["stop","prevent"]))},{default:q(()=>[R(t(B),{icon:"Ellipses",size:"md"})]),_:1})):V("",!0),t(w)!=="modal"?(C(),U(t(se),{key:1,class:"hover:bg-b-3 hover:text-c-1 aspect-square h-fit px-0.5 py-0 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",size:"sm",variant:"ghost",onClick:b[5]||(b[5]=F($=>Q(m.value.entity.uid),["stop","prevent"]))},{default:q(()=>[R(t(B),{icon:"Add",size:"md",thickness:"2"})]),_:1})):V("",!0)],2),m.value.watchMode?(C(),U(t(Le),{key:0,side:"right",sideOffset:12},{trigger:q(()=>[R(t(B),{class:Y(["ml-0.5 text-sm",ie.value]),icon:"Watch",size:"md",thickness:"2"},null,8,["class"])]),content:q(()=>[h("div",Wa,[h("div",Va,[h("p",ja," Watching: "+X(m.value.documentUrl),1)])])]),_:1})):V("",!0),b[17]||(b[17]=h("span",null," ",-1))])])],10,Oa)):t(w)!=="modal"||g.parentUids.length?(C(),G("button",{key:2,"aria-expanded":!!t(M)[m.value.entity.uid],class:Y(["hover:bg-b-2 group relative flex w-full flex-row justify-start gap-1.5 rounded p-1.5 focus-visible:z-10",[We]]),type:"button",onClick:b[8]||(b[8]=$=>t(E)(m.value.entity.uid))},[h("span",La,[$e(g.$slots,"leftIcon",{},()=>[R(t(at),{class:"text-c-3 hover:text-c-1 shrink-0",open:!!t(M)[m.value.entity.uid]},null,8,["open"])],!0),b[18]||(b[18]=ne("   "))]),h("div",Pa,[h("span",Ha,X(m.value.title),1),h("div",Ba,[h("div",{class:Y(["items-center gap-px opacity-0 group-hover:flex group-hover:opacity-100 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",{flex:g.menuItem.open,hidden:!g.menuItem.open||((ue=g.menuItem.item)==null?void 0:ue.entity.uid)!==m.value.entity.uid}])},[t(w)!=="modal"&&!p.value||p.value&&le.value?(C(),U(t(se),{key:0,class:"hover:bg-b-3 hover:text-c-1 aspect-square h-fit px-0.5 py-0 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",size:"sm",variant:"ghost",onClick:b[6]||(b[6]=F($=>g.$emit("openMenu",{item:m.value,parentUids:g.parentUids,targetRef:$.currentTarget.parentNode,open:!0}),["stop","prevent"]))},{default:q(()=>[R(t(B),{icon:"Ellipses",size:"md"})]),_:1})):V("",!0),t(w)!=="modal"?(C(),U(t(se),{key:1,class:"hover:bg-b-3 hover:text-c-1 aspect-square h-fit px-0.5 py-0 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",size:"sm",variant:"ghost",onClick:b[7]||(b[7]=F($=>Q(m.value.entity.uid),["stop","prevent"]))},{default:q(()=>[R(t(B),{icon:"Add",size:"md",thickness:"2"})]),_:1})):V("",!0)],2),m.value.watchMode?(C(),U(t(Le),{key:0,side:"right",sideOffset:12},{trigger:q(()=>[R(t(B),{class:Y(["ml-0.5 text-sm",ie.value]),icon:"Watch",size:"md",thickness:"2"},null,8,["class"])]),content:q(()=>[h("div",Fa,[h("div",Ga,[h("p",Ya," Watching: "+X(m.value.documentUrl),1)])])]),_:1})):V("",!0),b[19]||(b[19]=h("span",null," ",-1))])])],10,$a)):V("",!0),z.value?(C(),G("ul",Za,[(C(!0),G(re,null,Re(m.value.children,$=>(C(),U(J,{key:$,isDraggable:!t(c)[$],isDroppable:L,menuItem:g.menuItem,parentUids:[...g.parentUids,g.uid],uid:$,onNewTab:b[9]||(b[9]=(_,k)=>g.$emit("newTab",_,k)),onOnDragEnd:b[10]||(b[10]=(..._)=>g.$emit("onDragEnd",..._)),onOpenMenu:b[11]||(b[11]=_=>g.$emit("openMenu",_))},null,8,["isDraggable","menuItem","parentUids","uid"]))),128)),m.value.children.length===0?(C(),U(t(se),{key:0,class:Y(["text-c-1 hover:bg-b-2 flex h-8 w-full justify-start gap-1.5 py-0 text-xs",g.parentUids.length?"pl-9":""]),variant:"ghost",onClick:b[12]||(b[12]=$=>Q(m.value.entity.uid))},{default:q(()=>[R(t(B),{icon:"Add",size:"sm"}),b[20]||(b[20]=h("span",null,"Add Request",-1))]),_:1},8,["class"])):V("",!0)])):V("",!0)]}),_:3},8,["id","ceiling","floor","isDraggable","isDroppable","parentIds"])],2)):V("",!0)}}}),Qa=Oe(Ka,[["__scopeId","data-v-716d294a"]]),Ja={class:"flex w-[inherit] items-center text-sm"},Xa={class:"m-0 flex items-center gap-1.5 font-bold"},el={class:"line-clamp-1 text-left"},tl={class:"overflow-hidden text-ellipsis"},al={class:"flex h-4 w-4 items-center justify-center"},ll=pe({__name:"WorkspaceDropdown",setup(e){const{activeWorkspace:a}=he(),{workspaces:l,workspaceMutators:o,events:s}=ye(),{push:i}=we(),d=M=>{var E;M!==((E=a.value)==null?void 0:E.uid)&&i({name:"workspace",params:{workspace:M}})},r=Z(()=>Object.keys(l).length===1),n=()=>s.commandPalette.emit({commandName:"Create Workspace"}),u=K(""),c=K(""),v=Ee(),f=Ee(),D=M=>{const E=l[M];E&&(u.value=E.name,c.value=M,v.show())},x=M=>{M.trim()&&(o.edit(c.value,"name",M.trim()),v.hide())},S=M=>{const E=l[M];E&&(u.value=E.name,c.value=M,f.show())},T=async()=>{var M;if(!r.value){const E=((M=a.value)==null?void 0:M.uid)===c.value,w={...l};if(delete w[c.value],o.delete(c.value),E){const m=Object.keys(w)[0];await i({name:"workspace",params:{workspace:m}})}}f.hide()};return(M,E)=>(C(),G("div",null,[h("div",Ja,[R(t(je),null,{items:q(()=>[(C(!0),G(re,null,Re(t(l),(w,m)=>(C(),U(t(me),{key:m,class:"group/item flex w-full items-center gap-1.5 overflow-hidden text-ellipsis whitespace-nowrap",onClick:F(p=>d(w.uid),["stop"])},{default:q(()=>{var p;return[R(t(ut),{selected:((p=t(a))==null?void 0:p.uid)===m},null,8,["selected"]),h("span",tl,X(w.name),1),R(t(je),{placement:"right-start",teleport:""},{items:q(()=>[R(t(me),{class:"flex gap-2",onMousedown:y=>D(w.uid),onTouchend:F(y=>D(w.uid),["prevent"])},{default:q(()=>[R(t(B),{class:"inline-flex",icon:"Edit",size:"md",thickness:"1.5"}),E[4]||(E[4]=h("span",null,"Rename",-1))]),_:2},1032,["onMousedown","onTouchend"]),r.value?(C(),U(t(Le),{key:0,class:"z-overlay",side:"bottom"},{trigger:q(()=>[R(t(me),{class:"flex w-full gap-2",disabled:"",onMousedown:E[0]||(E[0]=F(()=>{},["prevent"])),onTouchend:E[1]||(E[1]=F(()=>{},["prevent"]))},{default:q(()=>[R(t(B),{class:"inline-flex",icon:"Delete",size:"md",thickness:"1.5"}),E[5]||(E[5]=h("span",null,"Delete",-1))]),_:1})]),content:q(()=>E[6]||(E[6]=[h("div",{class:"w-content bg-b-1 text-xxs text-c-1 pointer-events-none z-10 grid min-w-48 gap-1.5 rounded p-2 leading-5 shadow-lg"},[h("div",{class:"text-c-2 flex items-center"},[h("span",null,"Only workspace cannot be deleted.")])],-1)])),_:1})):(C(),U(t(me),{key:1,class:"flex !gap-2",onMousedown:F(y=>S(w.uid),["prevent"]),onTouchend:F(y=>S(w.uid),["prevent"])},{default:q(()=>[R(t(B),{class:"inline-flex",icon:"Delete",size:"sm",thickness:"1.5"}),E[7]||(E[7]=h("span",null,"Delete",-1))]),_:2},1032,["onMousedown","onTouchend"]))]),default:q(()=>[R(t(se),{class:"hover:bg-b-3 -mr-1 ml-auto aspect-square h-fit px-0.5 py-0 group-hover/item:flex",size:"sm",type:"button",variant:"ghost"},{default:q(()=>[R(t(B),{icon:"Ellipses",size:"sm"})]),_:1})]),_:2},1024)]}),_:2},1032,["onClick"]))),128)),R(t(ct)),R(t(me),{class:"flex items-center gap-1.5",onClick:n},{default:q(()=>[h("div",al,[R(t(B),{icon:"Add",size:"sm"})]),E[8]||(E[8]=h("span",null,"Create Workspace",-1))]),_:1})]),default:q(()=>[R(t(se),{class:"text-c-1 hover:bg-b-2 line-clamp-1 h-full w-fit justify-start px-1.5 py-1.5 font-normal",fullWidth:"",variant:"ghost"},{default:q(()=>{var w;return[h("div",Xa,[h("h2",el,X((w=t(a))==null?void 0:w.name),1)])]}),_:1})]),_:1})]),R(t(Ce),{size:"xxs",state:t(f),title:"Delete workspace"},{default:q(()=>[R(He,{variableName:u.value,warningMessage:"This cannot be undone. You’re about to delete the workspace and everything inside it.",onClose:E[2]||(E[2]=w=>t(f).hide()),onDelete:T},null,8,["variableName"])]),_:1},8,["state"]),R(t(Ce),{size:"xxs",state:t(v),title:"Rename Workspace"},{default:q(()=>[R(ft,{name:u.value,onClose:E[3]||(E[3]=w=>t(v).hide()),onEdit:x},null,8,["name"])]),_:1},8,["state"])]))}}),sl={class:"bg-b-1 sticky top-0 z-20 flex h-12 items-center px-3"},nl={key:1,class:"text-c-3"},ol=["aria-pressed"],rl={class:"sr-only"},il={class:"search-button-fade sticky top-12 z-10 px-3 py-2.5 pt-0 focus-within:z-20",role:"search"},ul={key:1,class:"contents"},cl={class:"empty-sidebar-item-content px-2.5 py-2.5"},dl={class:"rabbit-ascii relative m-auto mt-2 h-[68px] w-[60px]"},pl=pe({__name:"RequestSidebar",emits:["newTab","clearDrafts"],setup(e,{emit:a}){const l=a,{collapsedSidebarFolders:o,isSidebarOpen:s,setCollapsedSidebarFolder:i,toggleSidebarOpen:d}=Me(),{layout:r}=_e(),n=ye(),{activeWorkspaceCollections:u,activeRequest:c,activeWorkspaceRequests:v,activeWorkspace:f}=he(),{findRequestParents:D,events:x,requestMutators:S,requests:T}=n,{handleDragEnd:M,isDroppable:E}=ga(f,n),{replace:w}=we(),m=()=>{x.commandPalette.emit({commandName:"Import from OpenAPI/Swagger/Postman/cURL"})},p=St(),{toast:y}=Be(),O=It({open:!1}),z=K(!1);fe(c,_=>{_&&D(_).forEach(k=>i(k,!0))},{immediate:!0});const{searchText:A,searchResultsWithPlaceholderResults:N,selectedSearchResult:W,onSearchResultClick:L,fuseSearch:j,searchInputRef:Q,searchResultRefs:ie,navigateSearchResults:le,selectSearchResult:ge}=ya(),g=_=>{var k;_&&(_.toggleSidebar&&d(),_.focusRequestSearch&&((k=Q.value)==null||k.focus()))};Ue(()=>x.hotKeys.on(g)),Ge(()=>{x.hotKeys.off(g)});const b=_=>{if(_!=null&&_.documentUrl){_.watchMode=!_.watchMode;const k=u.value.find(I=>I.uid===_.entity.uid);k&&(k.watchMode=_.watchMode)}};fe(()=>u.value.map(_=>_.watchMode),(_,k)=>{_.forEach((I,P)=>{var H,ce,Ze;if(r!=="modal"&&I!==k[P]&&((ce=(H=u.value[P])==null?void 0:H.info)==null?void 0:ce.title)!=="Drafts"&&u.value[P]){const Ke=u.value[P];if(!Ke)return;const yt=`${(Ze=Ke.info)==null?void 0:Ze.title}: Watch Mode ${I?"enabled":"disabled"}`;y(yt,"info")}})});const J=Z(()=>{var _;const k=N.value;if(!k.length)return"No results found";const I=(_=k[W.value])==null?void 0:_.item;if(!I)return"No result selected";const P=A.value.length?`${k.length} result${k.length===1?"":"s"} found, `:"",H=`, HTTP Method ${I.httpVerb}, Path ${I.path}`,ce=`${I.title} ${H}`;return`${P}Selected: ${ce}`}),ae=()=>{const _=u.value.find(k=>{var I;return((I=k.info)==null?void 0:I.title)==="Drafts"});if(_&&_.requests.forEach(k=>{T[k]&&S.delete(T[k],_.uid)}),v.value.length){const k=u.value[0],I=k?.requests[0];I&&w({name:"request",params:{[ee.Request]:I}})}else{const{request:k}=dt();_&&(S.add(k,_.uid),w({name:"request",params:{[ee.Request]:k.uid}}))}},ue=()=>{z.value=!z.value,z.value||(A.value=""),z.value&&Fe(()=>{var _;return(_=Q.value)==null?void 0:_.focus()})},$=Z(()=>Ca(u.value,v.value,T));return(_,k)=>(C(),G(re,null,[lt(R(t(Ht),{class:Y([t(s)?"sidebar-active-width":""])},Mt({content:q(()=>[h("div",sl,[h("div",{class:Y(["size-8",{"xl:hidden":t(r)!=="modal"}])},null,2),t(r)!=="modal"?(C(),U(t(ll),{key:0})):V("",!0),t(r)!=="modal"?(C(),G("span",nl," / ")):V("",!0),t(r)!=="modal"?(C(),U(ha,{key:2})):V("",!0),h("button",{"aria-pressed":z.value,class:"ml-auto",type:"button",onClick:ue},[h("span",rl,X(z.value?"Hide":"Show")+" search ",1),R(t(B),{class:"text-c-3 hover:bg-b-2 p-1.75 max-h-8 max-w-8 rounded-lg text-sm",icon:"Search"})],8,ol)]),lt(h("div",il,[R(t(Tt),{ref_key:"searchInputRef",ref:Q,modelValue:t(A),"onUpdate:modelValue":k[0]||(k[0]=I=>pt(A)?A.value=I:null),"aria-controls":t(p),label:J.value,sidebar:"",onInput:t(j),onKeydown:[k[1]||(k[1]=qe(F(I=>t(le)("down"),["stop"]),["down"])),k[2]||(k[2]=qe(F(I=>t(ge)(),["stop"]),["enter"])),k[3]||(k[3]=qe(F(I=>t(le)("up"),["stop"]),["up"]))]},null,8,["modelValue","aria-controls","label","onInput"])],512),[[st,z.value]]),h("div",{class:Y(["gap-1/2 flex flex-1 flex-col overflow-visible overflow-y-auto px-3 pb-3 pt-0",[{"pb-14":t(r)!=="modal"},{"h-[calc(100%-273.5px)]":$.value}]]),onDragenter:k[6]||(k[6]=F(()=>{},["prevent"])),onDragover:k[7]||(k[7]=F(()=>{},["prevent"]))},[t(A)?(C(),U(t(Ut),{key:0,id:t(p),"aria-label":"Search Results",class:"gap-px",noResults:!t(N).length},{default:q(()=>[(C(!0),G(re,null,Re(t(N),(I,P)=>(C(),U(t(Ot),{id:`#search-input-${I.item.id}`,key:I.refIndex,ref_for:!0,ref:H=>t(ie)[P]=H,active:t(W)===P,class:"px-2",href:I.item.link,onClick:F(H=>t(L)(I),["prevent"]),onFocus:H=>W.value=P},{addon:q(()=>[k[9]||(k[9]=h("span",{class:"sr-only"},"HTTP Method:",-1)),R(mt,{class:"font-bold",method:I.item.httpVerb??"get"},null,8,["method"])]),default:q(()=>[ne(X(I.item.title)+" ",1)]),_:2},1032,["id","active","href","onClick","onFocus"]))),128))]),_:1},8,["id","noResults"])):(C(),G("nav",ul,[(C(!0),G(re,null,Re(t(u),I=>{var P;return C(),U(Qa,{key:I.uid,isDraggable:t(r)!=="modal"&&((P=I.info)==null?void 0:P.title)!=="Drafts",isDroppable:t(E),menuItem:O,parentUids:[],uid:I.uid,onNewTab:k[4]||(k[4]=(H,ce)=>l("newTab",{name:H,uid:ce})),onOnDragEnd:t(M),onOpenMenu:k[5]||(k[5]=H=>Object.assign(O,H))},{leftIcon:q(()=>{var H;return[((H=I.info)==null?void 0:H.title)==="Drafts"?(C(),U(t(B),{key:0,class:"text-sidebar-c-2 group-hover:hidden",icon:"Scribble",thickness:"2.25"})):(C(),U(t(vt),{key:1,class:"text-sidebar-c-2 size-3.5 min-w-3.5 stroke-2 group-hover:hidden",src:I["x-scalar-icon"]||"interface-content-folder"},null,8,["src"])),h("div",{class:Y({"rotate-90":t(o)[I.uid]})},[R(t(B),{class:"text-c-3 hover:text-c-1 hidden text-sm group-hover:block",icon:"ChevronRight",size:"md"})],2)]}),_:2},1032,["isDraggable","isDroppable","menuItem","uid","onOnDragEnd"])}),128))]))],34)]),button:q(()=>[h("div",{class:Y({"empty-sidebar-item":$.value})},[h("div",cl,[h("div",dl,[R(ot,{art:t(pa),class:"rabbitsit font-bold"},null,8,["art"]),R(ot,{art:t(va),class:"rabbitjump absolute left-0 top-0 font-bold"},null,8,["art"])]),k[10]||(k[10]=h("div",{class:"mb-2 mt-2 text-balance text-center text-sm"},[h("b",{class:"font-medium"},"Let's Get Started"),h("p",{class:"mt-2"}," Create request, folder, collection or import from OpenAPI/Postman ")],-1))]),t(r)!=="modal"?(C(),U(t(se),{key:0,class:Y(["mb-1.5 hidden h-fit w-full p-1.5 opacity-0",{"flex opacity-100":$.value}]),onClick:m},{default:q(()=>k[11]||(k[11]=[ne(" Import Collection ")])),_:1},8,["class"])):V("",!0),t(r)!=="modal"?(C(),U(Pt,{key:1,click:t(x).commandPalette.emit,hotkey:"K"},{title:q(()=>k[12]||(k[12]=[ne(" Add Item ")])),_:1},8,["click"])):V("",!0)],2)]),_:2},[t(r)!=="modal"?{name:"header",fn:q(()=>[]),key:"0"}:void 0]),1032,["class"]),[[st,t(s)]]),t(r)!=="modal"&&O?(C(),U(Ea,{key:0,menuItem:O,onClearDrafts:ae,onCloseMenu:k[8]||(k[8]=I=>O.open=!1),onToggleWatchMode:b},null,8,["menuItem"])):V("",!0)],64))}}),vl=Oe(pl,[["__scopeId","data-v-8def2cd7"]]),ml=(e,a=!1)=>{var l,o;const s=Object.fromEntries(e);a&&["Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers"].map(r=>r.toLowerCase()).forEach(r=>delete s[r]);const i=Object.keys(s).find(r=>r.toLowerCase()==="x-scalar-modified-headers"),d=i?((o=(l=s[i])==null?void 0:l.toString().split(", "))==null?void 0:o.map(r=>r.toLowerCase()))??[]:[];return Object.keys(s).forEach(r=>{d.includes(r.toLowerCase())&&delete s[r]}),i&&delete s[i],Object.keys(s).forEach(r=>{const n=/^x-scalar-original-/i;if(n.test(r)){const u=r.replace(n,"");s[r]&&(s[u]=s[r],delete s[r])}}),Object.keys(s).forEach(r=>{const n=fl(r);r!==n&&s[r]&&(s[n]=s[r],delete s[r])}),Object.fromEntries(Object.entries(s).sort(([r],[n])=>r.localeCompare(n)))},fl=e=>e.split("-").map(a=>a.charAt(0).toUpperCase()+a.toLowerCase().slice(1)).join("-");function hl(e,a,l){var o,s,i;if(!At(e))return{body:void 0,contentType:void 0};if(a.body.activeBody==="formData"&&a.body.formData){const d=a.body.formData.encoding==="form-data"?"multipart/form-data":"application/x-www-form-urlencoded",r=a.body.formData.encoding==="form-data"?new FormData:new URLSearchParams;return a.body.formData.value.forEach(n=>{!n.enabled||!n.key||(n.file&&r instanceof FormData?r.append(n.key,n.file,n.file.name):n.value!==void 0&&r.append(n.key,oe(n.value,l)))}),{body:r,contentType:d}}return a.body.activeBody==="raw"?{body:oe(((o=a.body.raw)==null?void 0:o.value)??"",l),contentType:(s=a.body.raw)==null?void 0:s.encoding}:a.body.activeBody==="binary"?{body:a.body.binary,contentType:(i=a.body.binary)==null?void 0:i.type}:{body:void 0,contentType:void 0}}function yl(e,a){const l={};return e.parameters.headers.forEach(o=>{const s=o.key.trim().toLowerCase();o.enabled&&(s!=="content-type"||o.value!=="multipart/form-data")&&(l[s]=oe(o.value,a))}),l}function gl(e,a){const l=new URLSearchParams;return e.parameters.query.forEach(o=>{o.enabled&&(o.type==="array"?oe(o.value??"",a).split(","):[oe(o.value??"",a)]).forEach(s=>l.append(o.key,s.trim()))}),l}function bl(e,a){const l=new zt(a);return jt.includes(l.essence)?new TextDecoder(l.parameters.get("charset")).decode(e):new Blob([e],{type:l.essence})}const xl=({environment:e,example:a,globalCookies:l,proxyUrl:o,request:s,securitySchemes:i,selectedSecuritySchemeUids:d=[],server:r,status:n})=>{try{const u=e??{},c=new AbortController,v=a.parameters.path.reduce((L,j)=>(j.enabled&&(L[j.key]=oe(j.value,u)),L),{}),f=oe(r?.url??"",u),D=oe(s.path,v);let x=f||D;if(!x)throw Pe.URL_EMPTY;Object.entries(r?.variables??{}).forEach(([L,j])=>{x=oe(x,{[L]:v[L]||j.default})});const S=gl(a,u),T=yl(a,u),{body:M}=hl(s.method,a,u),{cookieParams:E}=$t({example:a,env:u,globalCookies:l,serverUrl:x,proxyUrl:o}),w=d.flat().map(L=>i[L]).filter(Se),m=Nt(w,u),p={...Object.entries(m.headers).reduce((L,[j,Q])=>(L[j.toLowerCase()]=Q,L),{}),...T},y=[...E,...m.cookies],O=new URLSearchParams([...S,...m.urlParams]);x=Wt(x,D,O);const z=oe(Lt(y,p.Cookie),u);z&&(Ne(o,x)?(console.warn("We’re using a `X-Scalar-Cookie` custom header to the request. The proxy will forward this as a `Cookie` header. We do this to avoid the browser omitting the `Cookie` header for cross-origin requests for security reasons."),p["X-Scalar-Cookie"]=z):(console.warn(`We’re trying to add a Cookie header, but browsers often omit them for cross-origin requests for various security reasons. If it’s not working, that’s probably why. Here are the requirements for it to work:

          - The browser URL must be on the same domain as the server URL.
          - The connection must be made over HTTPS.
          `),p.Cookie=z));const A=new URLSearchParams([["scalar_url",x.toString()]]),N=Ne(o,x)?`${o}?${A.toString()}`:x,W=new Request(N,{method:s.method.toUpperCase(),body:M??null,headers:p});return[null,{request:W,sendRequest:async()=>{n?.emit("start");const L=Date.now();try{const j=await fetch(W,{signal:c.signal});n?.emit("stop");const Q=ml(j.headers,Ne(o,x)),ie=j.headers.get("content-type")??"text/plain;charset=UTF-8",le=await j.arrayBuffer(),ge=bl(le,ie),g="getSetCookie"in j.headers&&typeof j.headers.getSetCookie=="function"?j.headers.getSetCookie():[];return[null,{timestamp:Date.now(),request:a,response:{...j,headers:Q,cookieHeaderKeys:g,data:ge,size:le.byteLength,duration:Date.now()-L,method:s.method,status:j.status,path:D}}]}catch(j){return n?.emit("abort"),[nt(j,Pe.REQUEST_FAILED),null]}},controller:c}]}catch(u){return console.error(u),n?.emit("abort"),[nt(u),null]}},wl={class:"flex h-full"},kl={class:"flex h-full flex-1 flex-col"},El=pe({__name:"RequestRoot",emits:["newTab"],setup(e){const a=ye(),{toast:l}=Be(),{layout:o}=_e(),{activeCollection:s,activeExample:i,activeEnvironment:d,activeRequest:r,activeWorkspace:n,activeServer:u}=he(),{cookies:c,requestHistory:v,showSidebar:f,securitySchemes:D,events:x}=a,{isSidebarOpen:S}=Me(),T=K(),M=K(new Set),E=Z(()=>{var p,y;return(o==="modal"?(p=s.value)==null?void 0:p.selectedSecuritySchemeUids:(y=r.value)==null?void 0:y.selectedSecuritySchemeUids)??[]}),w=async()=>{var p,y,O,z;if(!r.value||!i.value||!s.value)return;M.value=ea(i.value);const A=typeof d.value=="object"?d.value.value:"{}",N=Yt.parse(A);N.error&&console.error("INVALID ENVIRONMENT!");const W=N.error||typeof N.data!="object"?{}:N.data??{},L=((p=n.value)==null?void 0:p.cookies.map(g=>c[g]).filter(Se))??[],j=((O=(y=s.value)==null?void 0:y.info)==null?void 0:O.title)==="Drafts"?void 0:u.value,[Q,ie]=xl({request:r.value,example:i.value,selectedSecuritySchemeUids:E.value,proxyUrl:((z=n.value)==null?void 0:z.proxyUrl)??"",environment:W,globalCookies:L,status:x.requestStatus,securitySchemes:D,server:j});if(Q){l(Q.message,"error");return}T.value=ie.controller;const[le,ge]=await ie.sendRequest();le?l(le.message,"error"):v.push(JSON.parse(JSON.stringify(ge)))},m=async()=>{var p;return(p=T.value)==null?void 0:p.abort(Pe.REQUEST_ABORTED)};return Ue(()=>{x.executeRequest.on(w),x.cancelRequest.on(m)}),da(),Ge(()=>x.executeRequest.off(w)),fe(()=>{var p;return(p=i.value)==null?void 0:p.parameters},()=>{M.value.clear()},{deep:!0}),(p,y)=>(C(),G("div",{class:Y(["bg-b-1 relative z-0 flex h-full flex-1 flex-col overflow-hidden pt-0",{"!mb-0 !mr-0 !border-0":t(o)==="modal"}])},[t(f)?(C(),U(Xt,{key:0,modelValue:t(S),"onUpdate:modelValue":y[0]||(y[0]=O=>pt(S)?S.value=O:null),class:Y(["absolute left-3 top-2 z-50",[{hidden:t(S)},{"xl:!flex":!t(S)},{"!flex":t(o)==="modal"}]])},null,8,["modelValue","class"])):V("",!0),h("div",wl,[t(f)?(C(),U(vl,{key:0,onNewTab:y[1]||(y[1]=O=>p.$emit("newTab",O))})):V("",!0),h("div",kl,[R(t(Vt),{invalidParams:M.value},null,8,["invalidParams"])])])],2))}}),jl=Oe(El,[["__scopeId","data-v-1dfc8727"]]);export{jl as default};
